const spawn = require("child_process").spawn;

function check_features(cb = (e,d) => {}) {
    console.log("Check features");
    const features_process = spawn('python', ['./mw/checker.py', './files/checker']);
    features_process.stdout.on('data', function (data) {
        try{
            console.log(data.toString());
            let object = JSON.parse(data.toString());
            cb(null, object);
        } catch (e){
            cb(e.message, null);
        }
    });
}

const learn_features = (cb = (e,d) => {}) => {
    const learn_process = spawn('python', ["./mw/learning0.py"]);
    console.log("features");
    learn_process.stdout.on('data', (data) => {
        try {
            console.log(data.toString());
            let object = JSON.parse(data.toString());
            cb(null, object);
        } catch (e) {
            cb(e.message, null);
        }
    });
};

module.exports = {check_features, learn_features};