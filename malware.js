const spawn = require("child_process").spawn;

function check_features(features, cb = (e,d) => {}) {
    const features_process = spawn('python', ['./mw/checker.py', './files/checker', features]);
    features_process.stdout.on('data', function (data) {
        try{
            let object = JSON.parse(data.toString());
            cb(null, object);
        } catch (e){
            cb(e.message, null);
        }
    });
}

const learn_features = (cb = (e,d) => {}) => {
    const learn_process = spawn('python', ["./mw/learning0.py"]);
    learn_process.stdout.on('data', (data) => {
        try {
            let object = JSON.parse(data.toString());
            cb(null, object);
        } catch (e) {
            cb(e.message, null);
        }
    });
};

module.exports = {check_features, learn_features};